[gd_scene load_steps=4 format=2]

[ext_resource path="res://Sprites/np_template.jpg" type="Texture" id=1]
[ext_resource path="res://Sprites/plain-arrow.png" type="Texture" id=2]

[sub_resource type="GDScript" id=1]

script/source = "extends Control

# class member variables go here, for example:
# var a = 2
# var b = \"textvar\"

var active_paper = 0
var paper_changed = false
var texts = ['']

func _ready():
	# Called every time the node is added to the scene.
	# Initialization here
	
	renew_papers()
	set_text(get_text())
	set_process(true)

func renew_papers():
	NewsRelatedData.choose_newspaper()
	texts = NewsRelatedData.get_list_newspaper()

func set_text(text):
	$Label.text = texts[active_paper]
	pass
	
func set_arrows():
	if active_paper == 0:
		$LeftArrow.visible = false
	else:
		$LeftArrow.visible = true
	
func get_text():
	return texts[active_paper]
	
func set_page():
	$Page.text = '%s/%s' % [active_paper+1,len(texts)]
	
func next_paper():
	active_paper += 1
	paper_changed = true
	pass
	
func prev_paper():
	#active_paper = (active_paper - 1) % len(texts)
	active_paper = max(0,(active_paper - 1))
	paper_changed = true
	pass

func _process(delta):
#	# Called every frame. Delta is time since last frame.
#	# Update game logic here.
	newspaper_state_machine()
	
			

func newspaper_state_machine():
	
	if Input.is_action_just_pressed('ui_right'):
		next_paper()
	if Input.is_action_just_pressed('ui_left'):
		prev_paper()
	
	set_arrows()
	set_page()
		
	if paper_changed:
		paper_changed = false
		if active_paper < len(texts):
			set_text(texts[active_paper])
		else:
			return true
			#$Newspaper.visible = false
			#$Newspaper.queue_free()
	return false"

[node name="UI" type="Control" index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
rect_pivot_offset = Vector2( 0, 0 )
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
script = SubResource( 1 )

[node name="News" type="TextureRect" parent="." index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 213.0
margin_top = 4.0
margin_right = 807.0
margin_bottom = 598.0
rect_pivot_offset = Vector2( 0, 0 )
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
texture = ExtResource( 1 )
expand = true
stretch_mode = 0

[node name="RightArrow" type="TextureRect" parent="." index="1"]

modulate = Color( 0.480469, 0.155777, 0.155777, 1 )
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 843.0
margin_top = 222.0
margin_right = 1023.0
margin_bottom = 402.0
rect_pivot_offset = Vector2( 0, 0 )
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
texture = ExtResource( 2 )
expand = true
stretch_mode = 0

[node name="LeftArrow" type="TextureRect" parent="." index="2"]

modulate = Color( 0.480469, 0.155777, 0.155777, 1 )
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 191.0
margin_top = 407.0
margin_right = 371.0
margin_bottom = 587.0
rect_rotation = 180.0
rect_pivot_offset = Vector2( 0, 0 )
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
texture = ExtResource( 2 )
expand = true
stretch_mode = 0
_sections_unfolded = [ "Anchor", "Focus", "Grow Direction", "Hint", "Margin", "Material", "Mouse", "Pause", "Rect", "Size Flags", "Theme", "Visibility" ]

[node name="Label" type="Label" parent="." index="3"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 367.0
margin_top = 150.0
margin_right = 644.0
margin_bottom = 298.0
rect_pivot_offset = Vector2( 0, 0 )
mouse_filter = 2
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 4
custom_colors/font_color = Color( 0.253906, 0.253906, 0.253906, 1 )
custom_constants/line_spacing = -1
text = "In mollis ante ut accumsan mollis. Donec aliquam congue ornare. Morbi dictum, turpis ornare fringilla efficitur, dui eros faucibus dolor, ac laoreet libero nunc eu libero. Sed sit amet facilisis nisl. Donec elit ante, egestas eu condimentum quis, aliquet ut nisi. In varius semper augue, id faucibus risus dapibus eu. Donec auctor tempus purus ut mollis. Etiam posuere eleifend elit ac egestas. Sed pharetra nisi ex, eget ultricies magna vulputate vitae. Phasellus consectetur ipsum mauris, non ultricies mauris sagittis eget. Ut at bibendum felis. Pellentesque non lectus accumsan, mattis massa eget, scelerisque enim. Pellentesque varius, tellus sit amet faucibus ornare, ante orci efficitur leo, ac gravida turpis lorem ut dui. Aenean quis purus urna. Nullam quis libero non mauris vulputate auctor sit amet non magna."
autowrap = true
clip_text = true
uppercase = true
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1
_sections_unfolded = [ "Anchor", "Focus", "Grow Direction", "Hint", "Margin", "Material", "Mouse", "Pause", "Rect", "Size Flags", "Theme", "Visibility", "custom_colors", "custom_constants", "custom_fonts", "custom_styles" ]

[node name="Page" type="Label" parent="." index="4"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = 736.0
margin_top = 5.0
margin_right = 789.0
margin_bottom = 22.0
rect_pivot_offset = Vector2( 0, 0 )
mouse_filter = 2
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 4
custom_colors/font_color = Color( 0.253906, 0.253906, 0.253906, 1 )
custom_constants/line_spacing = -1
text = "10/10"
align = 2
clip_text = true
uppercase = true
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1
_sections_unfolded = [ "Anchor", "Focus", "Grow Direction", "Hint", "Margin", "Material", "Mouse", "Pause", "Rect", "Size Flags", "Theme", "Visibility", "custom_colors", "custom_constants", "custom_fonts", "custom_styles" ]


